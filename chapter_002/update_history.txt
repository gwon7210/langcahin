| 번호 | 변경 대상                   | 과거 방식 문제                                                 | 최신 방식으로 수정한 이유                                    |
| -- | ----------------------- | -------------------------------------------------------- | ------------------------------------------------- |
| 1  | **모델 지정 방식**            | 모델 미지정 → 내부 기본값(gpt-3.5-turbo) 사용<br>→ 변경 시 의도치 않은 결과 발생 | OpenAI 모델 변화 속도 빠름 → **명확한 모델 지정 필수**             |
| 2  | **역할명(ai → assistant)** | `"ai"`는 OpenAI 표준과 불일치<br>→ 추후 호환성 문제 발생                 | `"assistant"`는 공식 챗 메시지 스키마<br>→ **플랫폼 간 호환성 향상** |
| 3  | **System Prompt 관리 방식** | system 메시지를 히스토리에 누적<br>→ 토큰 낭비, 대화 관리 혼란                | 시스템 속성은 템플릿 전용<br>→ 히스토리는 순수하게 대화 로그로 유지          |


| 개선 항목            | 과거 코드                  | 개선 코드                             |
| ---------------- | ---------------------- | --------------------------------- |
| 모델 설정            | `ChatOpenAI()`         | `ChatOpenAI(model="gpt-4o-mini")` |
| 역할명              | `("ai", response)`     | `("assistant", response)`         |
| System Prompt 위치 | message_history 내부에 저장 | PromptTemplate에 고정 배치             |



| 효과       | 설명                                    |
| -------- | ------------------------------------- |
| 안정성 ↑    | 모델 변경 시 문제 방지                         |
| 비용 관리 개선 | System Prompt 중복 포함 제거 → 토큰 절약        |
| 확장성 ↑    | Memory, Agent, LangGraph로 자연스럽게 확장 가능 |
| 최신 규격 준수 | LangChain이 앞으로 유지할 구조에 부합             |


